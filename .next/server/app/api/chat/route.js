"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fryanbyrne%2FDocuments%2Fcheckouts%2FStrong%20Medicine%2Fchat-screening-tool%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fryanbyrne%2FDocuments%2Fcheckouts%2FStrong%20Medicine%2Fchat-screening-tool&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fryanbyrne%2FDocuments%2Fcheckouts%2FStrong%20Medicine%2Fchat-screening-tool%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fryanbyrne%2FDocuments%2Fcheckouts%2FStrong%20Medicine%2Fchat-screening-tool&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var _Users_ryanbyrne_Documents_checkouts_Strong_Medicine_chat_screening_tool_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/app/api/chat/route.ts */ \"(rsc)/./src/app/api/chat/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    resolvedPagePath: \"/Users/ryanbyrne/Documents/checkouts/Strong Medicine/chat-screening-tool/src/app/api/chat/route.ts\",\n    nextConfigOutput,\n    userland: _Users_ryanbyrne_Documents_checkouts_Strong_Medicine_chat_screening_tool_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/chat/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnJ5YW5ieXJuZSUyRkRvY3VtZW50cyUyRmNoZWNrb3V0cyUyRlN0cm9uZyUyME1lZGljaW5lJTJGY2hhdC1zY3JlZW5pbmctdG9vbCUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZyeWFuYnlybmUlMkZEb2N1bWVudHMlMkZjaGVja291dHMlMkZTdHJvbmclMjBNZWRpY2luZSUyRmNoYXQtc2NyZWVuaW5nLXRvb2wmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2dFO0FBQy9IO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ2lKOztBQUVqSiIsInNvdXJjZXMiOlsid2VicGFjazovL2NoYXQtc2NyZWVuaW5nLXRvb2wvPzQ2OTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3J5YW5ieXJuZS9Eb2N1bWVudHMvY2hlY2tvdXRzL1N0cm9uZyBNZWRpY2luZS9jaGF0LXNjcmVlbmluZy10b29sL3NyYy9hcHAvYXBpL2NoYXQvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NoYXQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jaGF0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jaGF0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3J5YW5ieXJuZS9Eb2N1bWVudHMvY2hlY2tvdXRzL1N0cm9uZyBNZWRpY2luZS9jaGF0LXNjcmVlbmluZy10b29sL3NyYy9hcHAvYXBpL2NoYXQvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY2hhdC9yb3V0ZVwiO1xuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fryanbyrne%2FDocuments%2Fcheckouts%2FStrong%20Medicine%2Fchat-screening-tool%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fryanbyrne%2FDocuments%2Fcheckouts%2FStrong%20Medicine%2Fchat-screening-tool&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/chat/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/chat/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nconst SYSTEM_PROMPT = `You are a professional medical screening assistant for Strong Medicine, a functional medicine clinic. Your role is to conduct a comprehensive health assessment through conversational questions.\n\nIMPORTANT GUIDELINES:\n1. You are NOT diagnosing or providing medical advice\n2. You are collecting information for a health screening report\n3. Ask follow-up questions based on responses to gather comprehensive information\n4. Be empathetic, professional, and thorough\n5. Focus on functional medicine approaches (root causes, lifestyle factors, etc.)\n6. Progress through these stages: demographics → symptoms → medical history → lifestyle → analysis\n\nSTAGES:\n- demographics: Age, gender, location, occupation\n- symptoms: Current symptoms, duration, severity, patterns\n- history: Medical history, family history, previous treatments\n- lifestyle: Diet, exercise, sleep, stress, environment\n- analysis: Summarize findings and prepare for report generation\n\nRESPONSE FORMAT:\n- Ask 1-2 focused questions at a time\n- Show empathy for patient concerns\n- Use natural, conversational language\n- Guide towards the next stage when current stage is complete\n\nRemember: You're gathering information for a comprehensive functional medicine assessment, not providing diagnoses.`;\nasync function POST(req) {\n    try {\n        const { message, patientData, messageHistory, currentStage } = await req.json();\n        // Create conversation history for OpenAI\n        const messages = [\n            {\n                role: \"system\",\n                content: SYSTEM_PROMPT\n            },\n            ...messageHistory.slice(-10).map((msg)=>({\n                    role: msg.type === \"user\" ? \"user\" : \"assistant\",\n                    content: msg.content\n                })),\n            {\n                role: \"user\",\n                content: message\n            }\n        ];\n        // Add context about current data and stage\n        const contextMessage = `Current patient data: ${JSON.stringify(patientData)}\nCurrent stage: ${currentStage}\nPlease continue the assessment, asking appropriate follow-up questions for the current stage or transitioning to the next stage if this one is complete.`;\n        messages.splice(-1, 0, {\n            role: \"system\",\n            content: contextMessage\n        });\n        const completion = await openai.chat.completions.create({\n            model: \"gpt-4\",\n            messages: messages,\n            max_tokens: 300,\n            temperature: 0.7\n        });\n        const response = completion.choices[0]?.message?.content || \"I'm having trouble processing that. Could you please rephrase?\";\n        // Parse user response and update patient data\n        const updatedPatientData = await updatePatientData(message, patientData, currentStage);\n        // Calculate progress and determine next stage\n        const { progress, nextStage } = calculateProgress(updatedPatientData, currentStage);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: response,\n            updatedPatientData,\n            progress,\n            currentStage: nextStage\n        });\n    } catch (error) {\n        console.error(\"Chat API error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to process request\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function updatePatientData(userMessage, currentData, stage) {\n    const updated = {\n        ...currentData\n    };\n    // Use simple keyword extraction for demo (in production, use more sophisticated NLP)\n    const lowerMessage = userMessage.toLowerCase();\n    switch(stage){\n        case \"demographics\":\n            // Extract age\n            const ageMatch = userMessage.match(/(\\d{1,3})\\s*(?:years?\\s*old|yo|yrs?)?/i);\n            if (ageMatch) {\n                updated.demographics.age = parseInt(ageMatch[1]);\n            }\n            // Extract gender\n            if (lowerMessage.includes(\"male\") && !lowerMessage.includes(\"female\")) {\n                updated.demographics.gender = \"male\";\n            } else if (lowerMessage.includes(\"female\")) {\n                updated.demographics.gender = \"female\";\n            } else if (lowerMessage.includes(\"man\") || lowerMessage.includes(\"guy\")) {\n                updated.demographics.gender = \"male\";\n            } else if (lowerMessage.includes(\"woman\") || lowerMessage.includes(\"lady\")) {\n                updated.demographics.gender = \"female\";\n            }\n            break;\n        case \"symptoms\":\n            // Extract symptoms (simple keyword matching)\n            const symptomKeywords = [\n                \"pain\",\n                \"fatigue\",\n                \"headache\",\n                \"nausea\",\n                \"dizzy\",\n                \"tired\",\n                \"ache\",\n                \"sore\",\n                \"hurt\",\n                \"sick\",\n                \"weak\",\n                \"anxiety\",\n                \"stress\",\n                \"depressed\",\n                \"bloating\",\n                \"constipation\",\n                \"diarrhea\",\n                \"insomnia\",\n                \"sleep\",\n                \"brain fog\",\n                \"memory\"\n            ];\n            symptomKeywords.forEach((keyword)=>{\n                if (lowerMessage.includes(keyword) && !updated.symptoms.includes(keyword)) {\n                    updated.symptoms.push(keyword);\n                }\n            });\n            break;\n        case \"history\":\n            // Extract medical history\n            const historyKeywords = [\n                \"diabetes\",\n                \"hypertension\",\n                \"thyroid\",\n                \"cancer\",\n                \"surgery\",\n                \"depression\",\n                \"anxiety\",\n                \"autoimmune\",\n                \"allergies\",\n                \"asthma\",\n                \"heart disease\",\n                \"stroke\"\n            ];\n            historyKeywords.forEach((keyword)=>{\n                if (lowerMessage.includes(keyword) && !updated.medicalHistory.includes(keyword)) {\n                    updated.medicalHistory.push(keyword);\n                }\n            });\n            break;\n        case \"lifestyle\":\n            // Extract lifestyle information\n            if (lowerMessage.includes(\"stress\")) {\n                if (lowerMessage.includes(\"high\") || lowerMessage.includes(\"very\") || lowerMessage.includes(\"lot\")) {\n                    updated.lifestyle.stress_level = \"high\";\n                } else if (lowerMessage.includes(\"low\") || lowerMessage.includes(\"little\")) {\n                    updated.lifestyle.stress_level = \"low\";\n                } else {\n                    updated.lifestyle.stress_level = \"moderate\";\n                }\n            }\n            if (lowerMessage.includes(\"sleep\")) {\n                if (lowerMessage.includes(\"good\") || lowerMessage.includes(\"well\")) {\n                    updated.lifestyle.sleep_quality = \"good\";\n                } else if (lowerMessage.includes(\"poor\") || lowerMessage.includes(\"bad\") || lowerMessage.includes(\"terrible\")) {\n                    updated.lifestyle.sleep_quality = \"poor\";\n                } else {\n                    updated.lifestyle.sleep_quality = \"fair\";\n                }\n            }\n            break;\n    }\n    return updated;\n}\nfunction calculateProgress(patientData, currentStage) {\n    let progress = 0;\n    let nextStage = currentStage;\n    // Demographics (20%)\n    if (patientData.demographics.age && patientData.demographics.gender) {\n        progress += 20;\n        if (currentStage === \"demographics\") nextStage = \"symptoms\";\n    }\n    // Symptoms (25%)\n    if (patientData.symptoms.length > 0) {\n        progress += 25;\n        if (currentStage === \"symptoms\") nextStage = \"history\";\n    }\n    // Medical History (20%)\n    if (patientData.medicalHistory.length > 0 || currentStage === \"history\") {\n        progress += 20;\n        if (currentStage === \"history\") nextStage = \"lifestyle\";\n    }\n    // Lifestyle (25%)\n    if (Object.keys(patientData.lifestyle).length > 0 || currentStage === \"lifestyle\") {\n        progress += 25;\n        if (currentStage === \"lifestyle\") nextStage = \"analysis\";\n    }\n    // Analysis (10%)\n    if (currentStage === \"analysis\") {\n        progress += 10;\n        nextStage = \"complete\";\n    }\n    return {\n        progress: Math.min(progress, 100),\n        nextStage\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixpQkFBaUIsV0FBV3lCLFlBQVk7SUFDOUM7SUFFQSxrQkFBa0I7SUFDbEIsSUFBSTZCLE9BQU9DLElBQUksQ0FBQ3pELFlBQVlvRCxTQUFTLEVBQUVHLE1BQU0sR0FBRyxLQUFLckQsaUJBQWlCLGFBQWE7UUFDakZ3QixZQUFZO1FBQ1osSUFBSXhCLGlCQUFpQixhQUFheUIsWUFBWTtJQUNoRDtJQUVBLGlCQUFpQjtJQUNqQixJQUFJekIsaUJBQWlCLFlBQVk7UUFDL0J3QixZQUFZO1FBQ1pDLFlBQVk7SUFDZDtJQUVBLE9BQU87UUFBRUQsVUFBVWdDLEtBQUtDLEdBQUcsQ0FBQ2pDLFVBQVU7UUFBTUM7SUFBVTtBQUN4RCIsInNvdXJjZXMiOlsid2VicGFjazovL2NoYXQtc2NyZWVuaW5nLXRvb2wvLi9zcmMvYXBwL2FwaS9jaGF0L3JvdXRlLnRzPzQ2YjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IE9wZW5BSSBmcm9tICdvcGVuYWknXG5cbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxufSlcblxuaW50ZXJmYWNlIFBhdGllbnREYXRhIHtcbiAgZGVtb2dyYXBoaWNzOiB7XG4gICAgYWdlPzogbnVtYmVyXG4gICAgZ2VuZGVyPzogc3RyaW5nXG4gICAgbG9jYXRpb24/OiBzdHJpbmdcbiAgfVxuICBzeW1wdG9tczogc3RyaW5nW11cbiAgbWVkaWNhbEhpc3Rvcnk6IHN0cmluZ1tdXG4gIGN1cnJlbnRNZWRpY2F0aW9uczogc3RyaW5nW11cbiAgbGlmZXN0eWxlOiB7XG4gICAgc3RyZXNzX2xldmVsPzogc3RyaW5nXG4gICAgc2xlZXBfcXVhbGl0eT86IHN0cmluZ1xuICAgIGV4ZXJjaXNlX2ZyZXF1ZW5jeT86IHN0cmluZ1xuICAgIGRpZXRfdHlwZT86IHN0cmluZ1xuICB9XG4gIGNvbmNlcm5zOiBzdHJpbmdbXVxufVxuXG5pbnRlcmZhY2UgTWVzc2FnZSB7XG4gIGlkOiBzdHJpbmdcbiAgdHlwZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCdcbiAgY29udGVudDogc3RyaW5nXG4gIHRpbWVzdGFtcDogRGF0ZVxufVxuXG5jb25zdCBTWVNURU1fUFJPTVBUID0gYFlvdSBhcmUgYSBwcm9mZXNzaW9uYWwgbWVkaWNhbCBzY3JlZW5pbmcgYXNzaXN0YW50IGZvciBTdHJvbmcgTWVkaWNpbmUsIGEgZnVuY3Rpb25hbCBtZWRpY2luZSBjbGluaWMuIFlvdXIgcm9sZSBpcyB0byBjb25kdWN0IGEgY29tcHJlaGVuc2l2ZSBoZWFsdGggYXNzZXNzbWVudCB0aHJvdWdoIGNvbnZlcnNhdGlvbmFsIHF1ZXN0aW9ucy5cblxuSU1QT1JUQU5UIEdVSURFTElORVM6XG4xLiBZb3UgYXJlIE5PVCBkaWFnbm9zaW5nIG9yIHByb3ZpZGluZyBtZWRpY2FsIGFkdmljZVxuMi4gWW91IGFyZSBjb2xsZWN0aW5nIGluZm9ybWF0aW9uIGZvciBhIGhlYWx0aCBzY3JlZW5pbmcgcmVwb3J0XG4zLiBBc2sgZm9sbG93LXVwIHF1ZXN0aW9ucyBiYXNlZCBvbiByZXNwb25zZXMgdG8gZ2F0aGVyIGNvbXByZWhlbnNpdmUgaW5mb3JtYXRpb25cbjQuIEJlIGVtcGF0aGV0aWMsIHByb2Zlc3Npb25hbCwgYW5kIHRob3JvdWdoXG41LiBGb2N1cyBvbiBmdW5jdGlvbmFsIG1lZGljaW5lIGFwcHJvYWNoZXMgKHJvb3QgY2F1c2VzLCBsaWZlc3R5bGUgZmFjdG9ycywgZXRjLilcbjYuIFByb2dyZXNzIHRocm91Z2ggdGhlc2Ugc3RhZ2VzOiBkZW1vZ3JhcGhpY3Mg4oaSIHN5bXB0b21zIOKGkiBtZWRpY2FsIGhpc3Rvcnkg4oaSIGxpZmVzdHlsZSDihpIgYW5hbHlzaXNcblxuU1RBR0VTOlxuLSBkZW1vZ3JhcGhpY3M6IEFnZSwgZ2VuZGVyLCBsb2NhdGlvbiwgb2NjdXBhdGlvblxuLSBzeW1wdG9tczogQ3VycmVudCBzeW1wdG9tcywgZHVyYXRpb24sIHNldmVyaXR5LCBwYXR0ZXJuc1xuLSBoaXN0b3J5OiBNZWRpY2FsIGhpc3RvcnksIGZhbWlseSBoaXN0b3J5LCBwcmV2aW91cyB0cmVhdG1lbnRzXG4tIGxpZmVzdHlsZTogRGlldCwgZXhlcmNpc2UsIHNsZWVwLCBzdHJlc3MsIGVudmlyb25tZW50XG4tIGFuYWx5c2lzOiBTdW1tYXJpemUgZmluZGluZ3MgYW5kIHByZXBhcmUgZm9yIHJlcG9ydCBnZW5lcmF0aW9uXG5cblJFU1BPTlNFIEZPUk1BVDpcbi0gQXNrIDEtMiBmb2N1c2VkIHF1ZXN0aW9ucyBhdCBhIHRpbWVcbi0gU2hvdyBlbXBhdGh5IGZvciBwYXRpZW50IGNvbmNlcm5zXG4tIFVzZSBuYXR1cmFsLCBjb252ZXJzYXRpb25hbCBsYW5ndWFnZVxuLSBHdWlkZSB0b3dhcmRzIHRoZSBuZXh0IHN0YWdlIHdoZW4gY3VycmVudCBzdGFnZSBpcyBjb21wbGV0ZVxuXG5SZW1lbWJlcjogWW91J3JlIGdhdGhlcmluZyBpbmZvcm1hdGlvbiBmb3IgYSBjb21wcmVoZW5zaXZlIGZ1bmN0aW9uYWwgbWVkaWNpbmUgYXNzZXNzbWVudCwgbm90IHByb3ZpZGluZyBkaWFnbm9zZXMuYFxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBtZXNzYWdlLCBwYXRpZW50RGF0YSwgbWVzc2FnZUhpc3RvcnksIGN1cnJlbnRTdGFnZSB9ID0gYXdhaXQgcmVxLmpzb24oKVxuXG4gICAgLy8gQ3JlYXRlIGNvbnZlcnNhdGlvbiBoaXN0b3J5IGZvciBPcGVuQUlcbiAgICBjb25zdCBtZXNzYWdlcyA9IFtcbiAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IFNZU1RFTV9QUk9NUFQgfSxcbiAgICAgIC4uLm1lc3NhZ2VIaXN0b3J5LnNsaWNlKC0xMCkubWFwKChtc2c6IE1lc3NhZ2UpID0+ICh7XG4gICAgICAgIHJvbGU6IG1zZy50eXBlID09PSAndXNlcicgPyAndXNlcicgOiAnYXNzaXN0YW50JyxcbiAgICAgICAgY29udGVudDogbXNnLmNvbnRlbnRcbiAgICAgIH0pKSxcbiAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBtZXNzYWdlIH1cbiAgICBdXG5cbiAgICAvLyBBZGQgY29udGV4dCBhYm91dCBjdXJyZW50IGRhdGEgYW5kIHN0YWdlXG4gICAgY29uc3QgY29udGV4dE1lc3NhZ2UgPSBgQ3VycmVudCBwYXRpZW50IGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkocGF0aWVudERhdGEpfVxuQ3VycmVudCBzdGFnZTogJHtjdXJyZW50U3RhZ2V9XG5QbGVhc2UgY29udGludWUgdGhlIGFzc2Vzc21lbnQsIGFza2luZyBhcHByb3ByaWF0ZSBmb2xsb3ctdXAgcXVlc3Rpb25zIGZvciB0aGUgY3VycmVudCBzdGFnZSBvciB0cmFuc2l0aW9uaW5nIHRvIHRoZSBuZXh0IHN0YWdlIGlmIHRoaXMgb25lIGlzIGNvbXBsZXRlLmBcbiAgICBcbiAgICBtZXNzYWdlcy5zcGxpY2UoLTEsIDAsIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IGNvbnRleHRNZXNzYWdlIH0pXG5cbiAgICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiAnZ3B0LTQnLFxuICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzIGFzIGFueSxcbiAgICAgIG1heF90b2tlbnM6IDMwMCxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgfSlcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50IHx8IFwiSSdtIGhhdmluZyB0cm91YmxlIHByb2Nlc3NpbmcgdGhhdC4gQ291bGQgeW91IHBsZWFzZSByZXBocmFzZT9cIlxuXG4gICAgLy8gUGFyc2UgdXNlciByZXNwb25zZSBhbmQgdXBkYXRlIHBhdGllbnQgZGF0YVxuICAgIGNvbnN0IHVwZGF0ZWRQYXRpZW50RGF0YSA9IGF3YWl0IHVwZGF0ZVBhdGllbnREYXRhKG1lc3NhZ2UsIHBhdGllbnREYXRhLCBjdXJyZW50U3RhZ2UpXG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIHByb2dyZXNzIGFuZCBkZXRlcm1pbmUgbmV4dCBzdGFnZVxuICAgIGNvbnN0IHsgcHJvZ3Jlc3MsIG5leHRTdGFnZSB9ID0gY2FsY3VsYXRlUHJvZ3Jlc3ModXBkYXRlZFBhdGllbnREYXRhLCBjdXJyZW50U3RhZ2UpXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgbWVzc2FnZTogcmVzcG9uc2UsXG4gICAgICB1cGRhdGVkUGF0aWVudERhdGEsXG4gICAgICBwcm9ncmVzcyxcbiAgICAgIGN1cnJlbnRTdGFnZTogbmV4dFN0YWdlXG4gICAgfSlcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0NoYXQgQVBJIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gcHJvY2VzcyByZXF1ZXN0JyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVBhdGllbnREYXRhKHVzZXJNZXNzYWdlOiBzdHJpbmcsIGN1cnJlbnREYXRhOiBQYXRpZW50RGF0YSwgc3RhZ2U6IHN0cmluZyk6IFByb21pc2U8UGF0aWVudERhdGE+IHtcbiAgY29uc3QgdXBkYXRlZCA9IHsgLi4uY3VycmVudERhdGEgfVxuICBcbiAgLy8gVXNlIHNpbXBsZSBrZXl3b3JkIGV4dHJhY3Rpb24gZm9yIGRlbW8gKGluIHByb2R1Y3Rpb24sIHVzZSBtb3JlIHNvcGhpc3RpY2F0ZWQgTkxQKVxuICBjb25zdCBsb3dlck1lc3NhZ2UgPSB1c2VyTWVzc2FnZS50b0xvd2VyQ2FzZSgpXG4gIFxuICBzd2l0Y2ggKHN0YWdlKSB7XG4gICAgY2FzZSAnZGVtb2dyYXBoaWNzJzpcbiAgICAgIC8vIEV4dHJhY3QgYWdlXG4gICAgICBjb25zdCBhZ2VNYXRjaCA9IHVzZXJNZXNzYWdlLm1hdGNoKC8oXFxkezEsM30pXFxzKig/OnllYXJzP1xccypvbGR8eW98eXJzPyk/L2kpXG4gICAgICBpZiAoYWdlTWF0Y2gpIHtcbiAgICAgICAgdXBkYXRlZC5kZW1vZ3JhcGhpY3MuYWdlID0gcGFyc2VJbnQoYWdlTWF0Y2hbMV0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEV4dHJhY3QgZ2VuZGVyXG4gICAgICBpZiAobG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdtYWxlJykgJiYgIWxvd2VyTWVzc2FnZS5pbmNsdWRlcygnZmVtYWxlJykpIHtcbiAgICAgICAgdXBkYXRlZC5kZW1vZ3JhcGhpY3MuZ2VuZGVyID0gJ21hbGUnXG4gICAgICB9IGVsc2UgaWYgKGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnZmVtYWxlJykpIHtcbiAgICAgICAgdXBkYXRlZC5kZW1vZ3JhcGhpY3MuZ2VuZGVyID0gJ2ZlbWFsZSdcbiAgICAgIH0gZWxzZSBpZiAobG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdtYW4nKSB8fCBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ2d1eScpKSB7XG4gICAgICAgIHVwZGF0ZWQuZGVtb2dyYXBoaWNzLmdlbmRlciA9ICdtYWxlJ1xuICAgICAgfSBlbHNlIGlmIChsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ3dvbWFuJykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdsYWR5JykpIHtcbiAgICAgICAgdXBkYXRlZC5kZW1vZ3JhcGhpY3MuZ2VuZGVyID0gJ2ZlbWFsZSdcbiAgICAgIH1cbiAgICAgIGJyZWFrXG4gICAgICBcbiAgICBjYXNlICdzeW1wdG9tcyc6XG4gICAgICAvLyBFeHRyYWN0IHN5bXB0b21zIChzaW1wbGUga2V5d29yZCBtYXRjaGluZylcbiAgICAgIGNvbnN0IHN5bXB0b21LZXl3b3JkcyA9IFsncGFpbicsICdmYXRpZ3VlJywgJ2hlYWRhY2hlJywgJ25hdXNlYScsICdkaXp6eScsICd0aXJlZCcsICdhY2hlJywgJ3NvcmUnLCAnaHVydCcsICdzaWNrJywgJ3dlYWsnLCAnYW54aWV0eScsICdzdHJlc3MnLCAnZGVwcmVzc2VkJywgJ2Jsb2F0aW5nJywgJ2NvbnN0aXBhdGlvbicsICdkaWFycmhlYScsICdpbnNvbW5pYScsICdzbGVlcCcsICdicmFpbiBmb2cnLCAnbWVtb3J5J11cbiAgICAgIHN5bXB0b21LZXl3b3Jkcy5mb3JFYWNoKGtleXdvcmQgPT4ge1xuICAgICAgICBpZiAobG93ZXJNZXNzYWdlLmluY2x1ZGVzKGtleXdvcmQpICYmICF1cGRhdGVkLnN5bXB0b21zLmluY2x1ZGVzKGtleXdvcmQpKSB7XG4gICAgICAgICAgdXBkYXRlZC5zeW1wdG9tcy5wdXNoKGtleXdvcmQpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBicmVha1xuICAgICAgXG4gICAgY2FzZSAnaGlzdG9yeSc6XG4gICAgICAvLyBFeHRyYWN0IG1lZGljYWwgaGlzdG9yeVxuICAgICAgY29uc3QgaGlzdG9yeUtleXdvcmRzID0gWydkaWFiZXRlcycsICdoeXBlcnRlbnNpb24nLCAndGh5cm9pZCcsICdjYW5jZXInLCAnc3VyZ2VyeScsICdkZXByZXNzaW9uJywgJ2FueGlldHknLCAnYXV0b2ltbXVuZScsICdhbGxlcmdpZXMnLCAnYXN0aG1hJywgJ2hlYXJ0IGRpc2Vhc2UnLCAnc3Ryb2tlJ11cbiAgICAgIGhpc3RvcnlLZXl3b3Jkcy5mb3JFYWNoKGtleXdvcmQgPT4ge1xuICAgICAgICBpZiAobG93ZXJNZXNzYWdlLmluY2x1ZGVzKGtleXdvcmQpICYmICF1cGRhdGVkLm1lZGljYWxIaXN0b3J5LmluY2x1ZGVzKGtleXdvcmQpKSB7XG4gICAgICAgICAgdXBkYXRlZC5tZWRpY2FsSGlzdG9yeS5wdXNoKGtleXdvcmQpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBicmVha1xuICAgICAgXG4gICAgY2FzZSAnbGlmZXN0eWxlJzpcbiAgICAgIC8vIEV4dHJhY3QgbGlmZXN0eWxlIGluZm9ybWF0aW9uXG4gICAgICBpZiAobG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdzdHJlc3MnKSkge1xuICAgICAgICBpZiAobG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdoaWdoJykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCd2ZXJ5JykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdsb3QnKSkge1xuICAgICAgICAgIHVwZGF0ZWQubGlmZXN0eWxlLnN0cmVzc19sZXZlbCA9ICdoaWdoJ1xuICAgICAgICB9IGVsc2UgaWYgKGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnbG93JykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdsaXR0bGUnKSkge1xuICAgICAgICAgIHVwZGF0ZWQubGlmZXN0eWxlLnN0cmVzc19sZXZlbCA9ICdsb3cnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlZC5saWZlc3R5bGUuc3RyZXNzX2xldmVsID0gJ21vZGVyYXRlJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ3NsZWVwJykpIHtcbiAgICAgICAgaWYgKGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnZ29vZCcpIHx8IGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnd2VsbCcpKSB7XG4gICAgICAgICAgdXBkYXRlZC5saWZlc3R5bGUuc2xlZXBfcXVhbGl0eSA9ICdnb29kJ1xuICAgICAgICB9IGVsc2UgaWYgKGxvd2VyTWVzc2FnZS5pbmNsdWRlcygncG9vcicpIHx8IGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnYmFkJykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCd0ZXJyaWJsZScpKSB7XG4gICAgICAgICAgdXBkYXRlZC5saWZlc3R5bGUuc2xlZXBfcXVhbGl0eSA9ICdwb29yJ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVwZGF0ZWQubGlmZXN0eWxlLnNsZWVwX3F1YWxpdHkgPSAnZmFpcidcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnJlYWtcbiAgfVxuICBcbiAgcmV0dXJuIHVwZGF0ZWRcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlUHJvZ3Jlc3MocGF0aWVudERhdGE6IFBhdGllbnREYXRhLCBjdXJyZW50U3RhZ2U6IHN0cmluZyk6IHsgcHJvZ3Jlc3M6IG51bWJlciwgbmV4dFN0YWdlOiBzdHJpbmcgfSB7XG4gIGxldCBwcm9ncmVzcyA9IDBcbiAgbGV0IG5leHRTdGFnZSA9IGN1cnJlbnRTdGFnZVxuICBcbiAgLy8gRGVtb2dyYXBoaWNzICgyMCUpXG4gIGlmIChwYXRpZW50RGF0YS5kZW1vZ3JhcGhpY3MuYWdlICYmIHBhdGllbnREYXRhLmRlbW9ncmFwaGljcy5nZW5kZXIpIHtcbiAgICBwcm9ncmVzcyArPSAyMFxuICAgIGlmIChjdXJyZW50U3RhZ2UgPT09ICdkZW1vZ3JhcGhpY3MnKSBuZXh0U3RhZ2UgPSAnc3ltcHRvbXMnXG4gIH1cbiAgXG4gIC8vIFN5bXB0b21zICgyNSUpXG4gIGlmIChwYXRpZW50RGF0YS5zeW1wdG9tcy5sZW5ndGggPiAwKSB7XG4gICAgcHJvZ3Jlc3MgKz0gMjVcbiAgICBpZiAoY3VycmVudFN0YWdlID09PSAnc3ltcHRvbXMnKSBuZXh0U3RhZ2UgPSAnaGlzdG9yeSdcbiAgfVxuICBcbiAgLy8gTWVkaWNhbCBIaXN0b3J5ICgyMCUpXG4gIGlmIChwYXRpZW50RGF0YS5tZWRpY2FsSGlzdG9yeS5sZW5ndGggPiAwIHx8IGN1cnJlbnRTdGFnZSA9PT0gJ2hpc3RvcnknKSB7XG4gICAgcHJvZ3Jlc3MgKz0gMjBcbiAgICBpZiAoY3VycmVudFN0YWdlID09PSAnaGlzdG9yeScpIG5leHRTdGFnZSA9ICdsaWZlc3R5bGUnXG4gIH1cbiAgXG4gIC8vIExpZmVzdHlsZSAoMjUlKVxuICBpZiAoT2JqZWN0LmtleXMocGF0aWVudERhdGEubGlmZXN0eWxlKS5sZW5ndGggPiAwIHx8IGN1cnJlbnRTdGFnZSA9PT0gJ2xpZmVzdHlsZScpIHtcbiAgICBwcm9ncmVzcyArPSAyNVxuICAgIGlmIChjdXJyZW50U3RhZ2UgPT09ICdsaWZlc3R5bGUnKSBuZXh0U3RhZ2UgPSAnYW5hbHlzaXMnXG4gIH1cbiAgXG4gIC8vIEFuYWx5c2lzICgxMCUpXG4gIGlmIChjdXJyZW50U3RhZ2UgPT09ICdhbmFseXNpcycpIHtcbiAgICBwcm9ncmVzcyArPSAxMFxuICAgIG5leHRTdGFnZSA9ICdjb21wbGV0ZSdcbiAgfVxuICBcbiAgcmV0dXJuIHsgcHJvZ3Jlc3M6IE1hdGgubWluKHByb2dyZXNzLCAxMDApLCBuZXh0U3RhZ2UgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJPcGVuQUkiLCJvcGVuYWkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJTWVNURU1fUFJPTVBUIiwiUE9TVCIsInJlcSIsIm1lc3NhZ2UiLCJwYXRpZW50RGF0YSIsIm1lc3NhZ2VIaXN0b3J5IiwiY3VycmVudFN0YWdlIiwianNvbiIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJzbGljZSIsIm1hcCIsIm1zZyIsInR5cGUiLCJjb250ZXh0TWVzc2FnZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzcGxpY2UiLCJjb21wbGV0aW9uIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJtYXhfdG9rZW5zIiwidGVtcGVyYXR1cmUiLCJyZXNwb25zZSIsImNob2ljZXMiLCJ1cGRhdGVkUGF0aWVudERhdGEiLCJ1cGRhdGVQYXRpZW50RGF0YSIsInByb2dyZXNzIiwibmV4dFN0YWdlIiwiY2FsY3VsYXRlUHJvZ3Jlc3MiLCJlcnJvciIsImNvbnNvbGUiLCJzdGF0dXMiLCJ1c2VyTWVzc2FnZSIsImN1cnJlbnREYXRhIiwic3RhZ2UiLCJ1cGRhdGVkIiwibG93ZXJNZXNzYWdlIiwidG9Mb3dlckNhc2UiLCJhZ2VNYXRjaCIsIm1hdGNoIiwiZGVtb2dyYXBoaWNzIiwiYWdlIiwicGFyc2VJbnQiLCJpbmNsdWRlcyIsImdlbmRlciIsInN5bXB0b21LZXl3b3JkcyIsImZvckVhY2giLCJrZXl3b3JkIiwic3ltcHRvbXMiLCJwdXNoIiwiaGlzdG9yeUtleXdvcmRzIiwibWVkaWNhbEhpc3RvcnkiLCJsaWZlc3R5bGUiLCJzdHJlc3NfbGV2ZWwiLCJzbGVlcF9xdWFsaXR5IiwibGVuZ3RoIiwiT2JqZWN0Iiwia2V5cyIsIk1hdGgiLCJtaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/chat/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/openai","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/webidl-conversions","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fryanbyrne%2FDocuments%2Fcheckouts%2FStrong%20Medicine%2Fchat-screening-tool%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fryanbyrne%2FDocuments%2Fcheckouts%2FStrong%20Medicine%2Fchat-screening-tool&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();